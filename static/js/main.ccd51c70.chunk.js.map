{"version":3,"sources":["containers/Home.js","containers/App.js","index.js"],"names":["Home","props","state","photos","currentImageIndex","canGoPrev","canGoNext","nextPrevSlide","bind","e","photoLength","this","length","newIndex","console","log","currentTarget","dataset","direction","setState","urls","id","items","push","className","src","alt","disabled","data-direction","onClick","React","Component","App","go","activePanel","to","fetchedUser","authToken","getItems","connect","subscribe","detail","type","data","access_token","send","api","fetchJsonp","then","res","json","response","map","photo_604","catch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ccd51c70.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Home.css';\r\nimport { Panel, Cell, List, PanelHeader, Group, Div, Button } from '@vkontakte/vkui';\r\n\r\nclass Home extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tphotos: [],\r\n\t\t\tcurrentImageIndex: 3,\r\n\t\t\tcanGoPrev: false,\r\n\t\t\tcanGoNext: true\r\n\t\t};\r\n\t\tthis.nextPrevSlide = this.nextPrevSlide.bind(this);\r\n\t}\r\n\r\n// const random = (min, max) => {\r\n// \tMath.floor(Math.random() * max) + min\r\n// };\r\n//\r\n//\r\n// TODO: пересмотреть этот код, а то что-то NEXT переключает сколько хочет\r\n//\r\n//\r\n\tnextPrevSlide(e) {\r\n\t\tconst photoLength = this.state.photos.length\r\n\t\tlet newIndex = this.state.currentImageIndex\r\n\t\tconsole.log(photoLength, newIndex);\r\n\t\tif (e.currentTarget.dataset.direction === 'next'){\r\n\t\t\tif (newIndex < photoLength - 1) {\r\n\t\t\t\tnewIndex = newIndex + 1;\r\n\t\t\t\tthis.setState({ canGoPrev: true });\r\n\t\t\t}\r\n\r\n\t\t\tif (newIndex === photoLength - 1) {\r\n\t\t\t\tthis.setState({ canGoNext: false });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (newIndex > 3) {\r\n\t\t\t\tnewIndex = newIndex - 1;\r\n\t\t\t\tthis.setState({ canGoNext: true });\r\n\t\t\t}\r\n\r\n\t\t\tif (newIndex === 3) {\r\n\t\t\t\tthis.setState({ canGoPrev: false });\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({currentImageIndex: newIndex});\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\t   let { id, items }  = this.props\r\n\r\n\r\n\r\n\t\t\t//**** следующие две строки сработали и у меня получилось ****//\r\n\t\t\tconst urls = this.props.items\r\n\t\t\tthis.state.photos.push(urls);\r\n\r\n\r\n\t\tconst alt = 'something'\r\n\r\n\t\treturn (\r\n\t\t\t<Panel id={this.props.id}>\r\n\t\t\t\t<PanelHeader>Literature quotes</PanelHeader>\r\n\t\t\t\t<Group className=\"centered\">\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{this.state.currentImageIndex - 2}\r\n\t\t\t\t\t\t\t<Cell className='testClass'><img src={this.state.photos[this.state.currentImageIndex]} alt=\"\" /></Cell>\r\n\t\t\t\t\t\t\t<Cell className=\"buttons\">\r\n\t\t\t\t\t\t\t<Button disabled={!this.state.canGoPrev} data-direction='prev' onClick={this.nextPrevSlide.bind(this)}>Пред.</Button>\r\n\t\t\t\t\t\t\t<Button disabled={!this.state.canGoNext} data-direction='next' onClick={this.nextPrevSlide.bind(this)}>След.</Button>\r\n\t\t\t\t\t\t\t</Cell>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Group>\r\n\t\t\t</Panel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// {items.map((data, index) => (\r\n// \t<Cell className=\"photoNumber\" key={index}>\r\n// \t\t<img src={data.photo_604} alt={alt}/><div><p>{index+1}</p></div>\r\n// </Cell>\r\n// ))}\r\nexport default Home;\r\n","import React, {useState, useEffect} from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Home from './Home';\nimport connect from '@vkontakte/vkui-connect';\nimport fetchJsonp from 'fetch-jsonp';\nimport { Panel, PanelHeader, Group, List, Cell, View } from '@vkontakte/vkui';\nimport './App.css';\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel: 'home',\n\t\t\tfetchedUser: null,\n\t\t\tauthToken : null,\n\t\t\titems : []\n\t\t};\n\n\t\tthis.getItems = this.getItems.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tthis.setState({ authToken : e.detail.data.access_token });\n\t\t\t\t\tthis.getItems();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail.type);\n\t\t\t}\n\t\t});\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t\tconnect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7539872, \"scope\": \"photos\"});\n\t}\n\n\tgo = (e) => {\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to })\n\t};\n\tgetItems() {\n\t\tconst ownerId = 196914612\n\t\tlet api = `https://api.vk.com/method/photos.get?v=5.52&access_token=${this.state.authToken}&owner_id=-${ownerId}&album_id=wall&count=1000`\n\t\tfetchJsonp(api)\n\t\t.then(res => res.json())\n\t\t.then(data => data.response.items.map(data => {this.setState({ items: data.photo_604 })}))//.map(data => {this.setState({ items: data })})) //this.setState({ items: data.response.items })\n\t\t.catch(e => []);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel}>\n\t\t\t\t<Home id=\"home\" items={this.state.items} fetchedUser={this.state.fetchedUser} go={this.go} />\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './containers/App';\r\nimport connect from '@vkontakte/vkui-connect';\r\nimport './index.css';\r\n\r\nconnect.send('VKWebAppInit', {});\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\r\n}\r\n"],"sourceRoot":""}